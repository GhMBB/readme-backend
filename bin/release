#!/bin/sh

# Verificar y preparar la base de datos de test con protecci√≥n desactivada
echo "Checking and preparing test database..."
DISABLE_DATABASE_ENVIRONMENT_CHECK=1 ./bin/rails db:test:prepare

# Ejecutar pruebas
echo "Running tests..."
if ./bin/rails test; then
  echo "Tests passed. Preparing database..."
  ./bin/rails db:prepare
else
  echo "Tests failed. Aborting release."
  exit 1
fi
